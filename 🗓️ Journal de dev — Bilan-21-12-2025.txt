üóìÔ∏è Journal de dev ‚Äî Bilan (aujourd‚Äôhui)
1) DB Longoka ‚Äî 6i695q_longoka_new_db (contenu cours/le√ßons)

Objectif : assainir les slugs des le√ßons (unicit√© / coh√©rence), car certains enregistrements dataient d‚Äôavant la logique auto.

‚úÖ Fait

D√©tection des collisions via GROUP BY slug HAVING COUNT(*) > 1.

Correction des cas concrets :

Le chiffre 2 en kikongo pointait sur le-chiffre-1-en-kikongo ‚Üí corrig√© vers le-chiffre-2-en-kikongo

mu-mi, di-ma, fi, etc. pointaient sur de mauvais slugs ‚Üí recoll√©s sur les bons slugs existants.

R√©sultat : la requ√™te ‚Äúdoublons de slug‚Äù renvoie 0 ligne.

Renforcement : tentative d‚Äôajout d‚Äôun UNIQUE sur lessons.lesson_slug_id ‚úÖ (donc 1 slug_id ‚Üî 1 lesson, plus d‚Äôambigu√Øt√© possible c√¥t√© factory).

üìå D√©cision importante

Le slug est unique et conforme au titre : on ne ‚Äúrecr√©e‚Äù pas des slugs si d√©j√† existants, on rattache la le√ßon au bon lesson_slug_id.

2) DB Factory ‚Äî 6i695q_factory_db (graph d‚Äôatomes + le√ßons structur√©es)

Vision : le contenu ‚Äúcours‚Äù devient un graphe d‚Äôobjets p√©dagogiques (chips, rules, examples, atoms‚Ä¶) r√©f√©renc√© par (platform_id, course_id, lesson_id) via lesson_refs.

2.1 R√©f√©rence de le√ßon (pointeur vers Longoka)

‚úÖ lesson_refs cr√©√©/ins√©r√© :

platform_id = 1

course_id = 3

lesson_id = 9

lesson_ref_id = 1

slug : lalphabet-du-kikongo-et-la-structure-des-mots-et-des-sons

‚û°Ô∏è √áa permet d‚Äôavoir plusieurs plateformes + plusieurs cours + plusieurs le√ßons sans m√©langer.

3) Le√ßon 9 ‚Äî ce qui est d√©j√† stock√© (factory)
3.1 Chips (blocs p√©dagogiques)

‚úÖ chip_types OK (objectif, regle, note, a_retenir)
‚úÖ chips ins√©r√©s pour lesson_ref_id=1

Tu as maintenant 8 chips visibles :

Objectif

Voyelles : groupes

√âpellation (ta / ata)

Prononciation (rappels)

Inventaire (cours)

Tons : diacritiques

Alternative sans diacritiques (valid√©e)

Norme Factory

Point cl√© : on ne stocke pas du lexique ‚Äúdictionnaire‚Äù ici. Les chips sont des r√®gles/rep√®res de cours.

3.2 Rules (r√®gles)

‚úÖ rule_types OK
‚úÖ rules OK + liaison lesson_rules

Tu as 4 rules li√©es √† la le√ßon 9 :

L9 ‚Äî √âpellation ta/ata

L9 ‚Äî Tons : diacritiques

L9 ‚Äî Double voyelle (sans diacritiques)

Factory ‚Äî pas de i‚Üíy / u‚Üíw

üìå D√©cision : pas d‚Äôexceptions sur i‚Üíy / u‚Üíw. On veut une √©criture phon√©tique et stable.

3.3 Examples (exemples)

‚úÖ examples : 7 exemples ins√©r√©s (ton bas/haut/modul√©, double voyelle, mua, etc.)

üìå Clarif importante (ta demande) :

On peut stocker des traductions en exemples (fr/en/‚Ä¶) uniquement comme support p√©dagogique.

Mais on ne stocke pas la masse ‚Äúlexique‚Äù (kg-fr-en) : √ßa reste dans Lexikongo/Lexilingala.

4) Alphabet (le√ßon 9) ‚Äî graphemes + atoms
4.1 Orthographe

‚úÖ orthographies :

orthography_id = 1

name = Kikongo classique

is_default = 1

4.2 Graphemes

‚úÖ grapheme_kinds : vowel / semi_vowel / consonant
‚úÖ graphemes : 20 graphemes (inventaire de la le√ßon 9)

4.3 Atoms ‚Äúgrapheme‚Äù

‚úÖ atoms : 20 atoms grapheme (li√©s √† l‚Äôorthographe default)
‚úÖ atom_grapheme_seq : mapping atom‚Üígrapheme (seq=1)
‚úÖ lesson_atoms : 20 atoms li√©s √† la le√ßon 9 (role = core)

5) Syllabes-racines (extension progressive)
5.1 Atoms ‚Äúsyllable‚Äù

‚úÖ atom_types : syllable
‚úÖ atom_subtypes : cv et ccv
‚úÖ Seed syllabes : 26 au total (14 CV + 12 CCV)

5.2 Grapheme decomposition auto

‚úÖ mapping via atom_grapheme_seq :

CV ‚Üí seq 1..2

CCV ‚Üí seq 1..3

üìå Tes chiffres confirment que tout est coh√©rent :

20 graphemes atoms √ó 1 = 20

14 CV √ó 2 = 28

12 CCV √ó 3 = 36
Total atom_grapheme_seq = 84 ‚úÖ (c‚Äôest exactement ce que tu as)

5.3 Liaison √† la le√ßon 9

‚úÖ lesson_atoms : 26 syllables li√©es √† le√ßon 9 (role = bonus)

üìå Et tu as raison : cette liste (pa, mpa, pi, mpi, ‚Ä¶) doit √™tre augment√©e au fil de l‚Äôeau, pas ‚Äútout d‚Äôun coup‚Äù.

6) Sources / th√©ories / tags (pour Sungu Banzuzi + Nsaudi)

‚úÖ source_kinds : book
‚úÖ sources : sungu_banzuzi_roots ins√©r√© (avec authors au bon champ)
‚úÖ atom_sources : 26 liens (1 par syllabe) ‚úÖ
‚úÖ atom_glosses : table pr√™te pour fr/en/pt/et‚Ä¶ (multi-langue clean, sans colonnes √† l‚Äôinfini)
‚úÖ tags + atom_tags : OK

tu as d√©j√† la logique ‚Äúscope=atom‚Äù

et tu as v√©rifi√© que la th√©orie tague bien 26 syllabes + 20 graphemes

üìå Tr√®s bon choix :

gloss multi-langue ‚Üí atom_glosses

bibliographie / provenance ‚Üí sources + atom_sources

classification ‚Üí tags + atom_tags

7) Relations (composition / d√©rivation / racines)

‚úÖ relation_types : d√©j√† riche (11 types), dont :

composed_of, derived_from, has_etym_root, variant_of, etc.
‚úÖ atom_relations pr√™t

üìå Point de linguistique/orthographe (ta correction) √† int√©grer dans nos ‚Äúr√®gles de d√©coupe‚Äù :

Pour un cas comme mpimpa :

on √©crit mpimpa

on peut prononcer [mpiimpa] (allongement tonique)
‚û°Ô∏è Donc : l‚Äôallongement ii est une r√®gle prosodique + exemple, pas une ‚Äúsyllabe de base‚Äù qui casserait la logique.
Et tu as valid√© : k√¥ka ‚Üî kooka (double voyelle = alternative ASCII).

‚úÖ O√π on en est (r√©sum√© ultra-court)

Longoka DB : slugs le√ßons propres, contrainte d‚Äôunicit√© ajout√©e ‚Üí base saine.

Factory DB : sch√©ma complet + Le√ßon 9 enti√®rement seed√©e :

lesson_refs ‚úÖ

chips ‚úÖ

rules + lesson_rules ‚úÖ

examples ‚úÖ

orthography + graphemes ‚úÖ

atoms graphemes ‚úÖ

atoms syllables (26) + d√©composition graphemique ‚úÖ

sources/tags/theories + liens ‚úÖ

relation_types pr√™ts ‚úÖ

Nickel ‚úÖ Tes contr√¥les confirment que la le√ßon 9 est propre et coh√©rente :

Chips L9 : 14

R√®gles li√©es √† L9 : 9

Atoms li√©s √† L9 : 20 graph√®mes (core) + 26 syllabes (bonus)

D√©composition syllabes ‚Üí graph√®mes : OK (0 anomalies)

Bilan complet (pour ton journal de dev) ‚Äî Factory DB
0) Contexte / s√©paration des DB

6i695q_longoka_new_db = base ‚Äúplateforme Longoka‚Äù (cours, lessons, slugs‚Ä¶).

Tu as corrig√© les doublons de lesson_slug_id.

Tu as pos√© une contrainte : UNIQUE(lesson_slug_id) sur lessons ‚Üí int√©grit√© OK.

6i695q_factory_db = base ‚Äúusine‚Äù (contenus structur√©s + graphe d‚Äôatomes), ind√©pendante des plateformes.

On n‚Äôy stocke pas le lexique complet (d√©j√† dans Lexikongo/Lexilingala).

On y stocke les r√®gles, chips, exemples, et un graphe (atomes + relations + sources) r√©utilisable pour g√©n√©rer livres/apps/jeux/exos.

1) Objectif atteint : ‚ÄúLe√ßon ‚Üí Graphe d‚Äôatomes‚Äù

La factory est maintenant capable de repr√©senter une le√ßon comme :

une r√©f√©rence (lesson_refs)

des contenus p√©dagogiques (chips / r√®gles / exemples)

des unit√©s manipulables (atoms + graph√®mes + relations)

des sources / th√©ories (pour les racines et les interpr√©tations)

2) Ce qui est en place dans 6i695q_factory_db (architecture)
A) R√©f√©rencement des le√ßons (multi-plateforme)

platforms : plateformes (Longoka, etc.)

lesson_refs : pivot (platform_id, course_id, lesson_id, slug, title, etc.)

modules, course_syllabus : pour structurer un parcours (optionnel / future UI)

‚úÖ Important : course_id/lesson_id ici sont les IDs ‚Äúplateforme‚Äù (Longoka), pas les IDs internes factory.

B) Contenu p√©dagogique structur√©

chip_types (objectif, regle, note, a_retenir, ‚Ä¶)

chips (lesson_ref_id ‚Üí texte markdown)

rule_types (orthography / prosody / pedagogy / ‚Ä¶)

rules

lesson_rules (link + importance)

examples (kg_text + fr_text + en_text + notes_md)

‚úÖ D√©cision : les traductions sont OK comme exemples (illustrations p√©dagogiques),
mais pas de ‚Äúcopie‚Äù du lexique (√ßa reste dans Lexikongo).

C) ‚ÄúGraphe linguistique‚Äù (atoms)

atom_types : (morpheme, stem, syllable, grapheme, phoneme, particle, clitic, word, number, other)

atom_subtypes : ex. syllable(cv/ccv), grapheme(vowel/semi_vowel/consonant), etc.

atoms : forme normalis√©e + notes + gloss √©ventuels (mais gloss d√©taill√©s plut√¥t via atom_glosses)

atom_relations + relation_types : derived_from, composed_of, has_etym_root, variant_of‚Ä¶

lesson_atoms + lesson_atom_roles : core/bonus + evidence_md

‚úÖ Tu as bien derived_from / composed_of / has_etym_root ‚Üí parfait pour relier mots ‚Üî racines.

D) Orthographe / alphabet (L9)

orthographies : (language_code, name, is_default)

grapheme_kinds : vowel / semi_vowel / consonant

graphemes : inventaire de lettres

atom_grapheme_seq : d√©composition d‚Äôun atom en graph√®mes ordonn√©s (cl√© pour syllabes, mots, etc.)

‚úÖ L9 a install√© :

Orthographe default : Kikongo classique (orthography_id=1, is_default=1)

20 graph√®mes en DB

20 atoms ‚Äúgrapheme‚Äù li√©s √† L9 (core)

26 atoms ‚Äúsyllable‚Äù li√©s √† L9 (bonus)

atom_grapheme_seq : mapping complet, coh√©rent (0 anomalies)

E) Sources / tags / th√©ories (racines & ‚Äúmod√®les‚Äù)

Tu as d√©j√† ce qu‚Äôil faut (et c‚Äôest tr√®s bien d‚Äôavoir tout de suite) :

source_kinds (ex: book)

sources (authors, year, publisher‚Ä¶)

atom_sources (atom_id ‚Üî source_id + ref/quote/comment)

tags (scope='atom', code='‚Ä¶')

atom_tags (atom ‚Üî tag)

theories (th√©ories rattachables √† une source)

‚úÖ Constat mesur√© (d‚Äôapr√®s tes requ√™tes) :

Les 26 syllabes sont reli√©es √† la source sungu_banzuzi_roots via atom_sources.

Les tags ‚Äúth√©orie Sungu Banzuzi‚Äù + ‚Äúth√©orie Nsaudi lettres‚Äù couvrent :

26 syllabes

20 graph√®mes

Donc tu as d√©j√† la structure pour plusieurs lectures du m√™me objet (scientifique/√©tymologique vs phonologique vs p√©dagogique) sans casser le mod√®le.

3) D√©cisions ‚Äúnormes‚Äù confirm√©es (√† noter au journal)

Pas de i‚Üíy / u‚Üíw comme r√®gle automatique (tu veux ‚Äúon entend comme on √©crit‚Äù, simple & strict).

Allongement vocalique : stock√© comme r√®gle de prosodie + exemples (ex: k√¥ka ‚Üî kooka valid√©).

Syllabes : stock√©es comme unit√©s ‚Äúfactory‚Äù (bonus), extensibles au fur et √† mesure (pa/mpa/ndi‚Ä¶ etc.)

Lexique : ne pas recopier Lexikongo dans la factory ; la factory pointe / r√©utilise via r√®gles + exemples + graphe.

4) √âtat actuel L9 (r√©sum√© ‚Äúlivrable‚Äù)

L9 est maintenant un ‚Äúpackage‚Äù complet utilisable par un futur dashboard :

lesson_refs : L9 existe (lesson_ref_id=1 pour course_id=3 lesson_id=9)

chips : 14

rules li√©es : 9

examples : pr√©sents (dont tons + double voyelle + mua)

orthographies/graphemes : ok

atoms : alphabet + syllabes

atom_grapheme_seq : ok

sources/tags/theories : d√©j√† en place

5) Points √† durcir avant le dashboard (important)

Je te conseille d‚Äôajouter/valider ces garde-fous (sinon tu vas souffrir plus tard) :

A) Unicit√© logique des atoms

Assure-toi qu‚Äôon a (ou qu‚Äôon ajoute) une contrainte logique :

unique (language_code, atom_type_id, normalized_form)
Sinon tu risques des doublons silencieux.

B) Vues SQL pour le dashboard ‚ÄúLessons‚Äù

Cr√©er 2‚Äì3 vues te simplifiera l‚ÄôUI :

Vue ‚Äúlesson overview‚Äù : nb_chips, nb_rules, nb_examples, nb_atoms

Vue ‚Äúlesson atoms list‚Äù : atoms + type/subtype + role(core/bonus)

Vue ‚Äúatom relations‚Äù : pour naviguer dans le graphe

Si tu veux, je te donne les CREATE VIEW pr√™ts √† copier.

6) Prochaine √©tape logique (avant L10)

Stabiliser le dashboard (lecture) :

lister lessons_refs

drill-down sur L9 : chips / rules / examples / atoms

Ensuite seulement : L10 (et on suit la m√™me m√©thode : ‚Äúle√ßon ‚Üí chips/rules/examples ‚Üí atoms/r√®gles ‚Üí liens‚Äù).

Si tu veux qu‚Äôon verrouille le bilan avec un ‚Äúsnapshot chiffr√© global‚Äù, ex√©cute juste ces 6 requ√™tes et colle les r√©sultats (√ßa fait un super bloc ‚ÄúJournal de dev‚Äù) :

SELECT COUNT(*) nb_lessons FROM lesson_refs;
SELECT COUNT(*) nb_chips FROM chips;
SELECT COUNT(*) nb_rules FROM rules;
SELECT COUNT(*) nb_examples FROM examples;
SELECT COUNT(*) nb_atoms FROM atoms;
SELECT COUNT(*) nb_relations FROM atom_relations;


Et apr√®s √ßa, on passe √† : vues SQL + structure du dashboard Lessons, puis L10.


Snapshot (factory_db)

lesson_refs : 1 (L9)

chips : 14

rules : 9

examples : 10

atoms : 54

atom_relations : 5

üëâ Donc aujourd‚Äôhui on a bien une le√ßon ‚Äúcompl√®te‚Äù (r√©f√©rence + contenu p√©dagogique + r√®gles + mini-exemples + base linguistique atomis√©e + d√©but de graphe).

Bilan complet (√† coller dans ton Journal de dev)
1) Objectif atteint : Factory DB = graphe d‚Äôatomes r√©f√©renc√© par lesson_id

On a mis en place une base ‚Äúfactory‚Äù ind√©pendante de Lexikongo (pas de duplication du lexique), con√ßue pour :

stocker le contenu p√©dagogique des le√ßons (chips, r√®gles, exemples),

stocker des atomes linguistiques (graph√®mes, syllabes-racines, etc.),

relier tout √ßa via des liaisons (lesson_atoms, atom_relations, atom_grapheme_seq, tags, sources‚Ä¶).

2) Le√ßon 9 (Kikongo) int√©gr√©e et stable

lesson_ref_id = 1 pour (course_id=3, lesson_id=9).

Contenu L9 stock√© :

14 chips : objectif + r√®gles (voyelles, √©pellation ta/ata, tons, norme Factory‚Ä¶) + notes + ‚Äú√† retenir‚Äù.

9 rules : r√®gles ‚Äúp√©dagogie / prosodie / orthographe‚Äù dont :

√©pellation ta/ata

tons avec diacritiques

alternative sans diacritiques (double voyelle valid√©e : ex. k√¥ka ‚Üí kooka)

norme ‚Äúpas de i‚Üíy / u‚Üíw‚Äù (orthographe : on √©crit ce qu‚Äôon entend)

10 examples : utilis√©s comme exemples p√©dagogiques (pas comme dictionnaire).

3) Alphabet et base phonographique (graph√®mes)

On a d√©fini l‚Äôorthographe Kikongo classique (default).

20 graph√®mes ins√©r√©s (voyelles + semi-voyelles + consonnes).

Ces graph√®mes ont √©t√© aussi cr√©√©s en atoms de type grapheme et li√©s √† la le√ßon 9 en core.

4) Syllabes-racines (√©tymologie / usine √† concepts)

On a cr√©√© un atom_type syllable (subtypes cv / ccv) et seed√© une premi√®re s√©rie (extension progressive).

Total actuel : 26 syllabes-racines (14 CV + 12 CCV).

D√©composition 100% clean : toutes les syllabes ont leur mapping graph√©mique complet dans atom_grapheme_seq

CV ‚Üí 2 graph√®mes

CCV ‚Üí 3 graph√®mes

Elles sont li√©es √† L9 en bonus (car ‚Äúfactory knowledge‚Äù, pas forc√©ment tout dans le cours).

5) Tags + sources d√©j√† en place (bonne d√©cision)

On a d√©j√† :

sources, source_kinds, atom_sources

tags, atom_tags

atom_glosses

Et on a d√©j√† cr√©√© la source :

Sungu Banzuzi ‚Äì Racines √©tymologiques du groupe linguistique koongo (sources.code = sungu_banzuzi_roots)
et on a reli√© les syllabes √† cette source via atom_sources.

üëâ Donc on est pr√™t pour :

ajouter au fur et √† mesure les d√©finitions/concepts (glosses FR/EN/‚Ä¶),

attribuer la provenance (Sungu, Nsaudi, etc.),

diff√©rencier les th√©ories (tags ‚Äútheory_*‚Äù) sans casser le sch√©ma.

6) Graphe en d√©marrage

5 relations actuellement dans atom_relations

Les relation_types sont d√©j√† riches : derived_from / composed_of / has_etym_root / variant_of etc.
üëâ On pourra relier plus tard :

des words / stems / morphemes aux syllabes-racines,

des expressions √† des composants,

et faire une vraie navigation ‚Äúgraph‚Äù.

Ce qu‚Äôil reste √† verrouiller (petite checklist technique)

Unique key atoms : (language_code, atom_type_id, normalized_form) (si pas d√©j√† fait).

Ajouter les vues SQL du dashboard (overview + lesson_atoms + relations + decompositions) ‚Üí pratique pour piloter.

////

Afficher la zone SQL
 MySQL a retourn√© un r√©sultat vide (c'est √† dire aucune ligne). (traitement en 0.0010 seconde(s).)
USE `6i695q_factory_db`
[√âditer en ligne] [ √âditer ] [ Cr√©er le code source PHP ]
 MySQL a retourn√© un r√©sultat vide (c'est √† dire aucune ligne). (traitement en 0.0010 seconde(s).)
SET NAMES utf8mb4
[√âditer en ligne] [ √âditer ] [ Cr√©er le code source PHP ]
 MySQL a retourn√© un r√©sultat vide (c'est √† dire aucune ligne). (traitement en 0.0877 seconde(s).)
-- ========================= -- 1) Vue : overview par le√ßon -- ========================= CREATE OR REPLACE VIEW v_lessons_overview AS SELECT lr.lesson_ref_id, lr.platform_id, lr.course_id, lr.lesson_id, lr.position, lr.lesson_group, lr.slug, lr.title, lr.status, lr.visibility, COALESCE(ch.nb_chips, 0) AS nb_chips, COALESCE(rl.nb_rules, 0) AS nb_rules, COALESCE(ex.nb_examples, 0) AS nb_examples, COALESCE(la.nb_atoms, 0) AS nb_atoms, COALESCE(la.nb_atoms_core, 0) AS nb_atoms_core, COALESCE(la.nb_atoms_bonus, 0) AS nb_atoms_bonus, COALESCE(la.nb_graphemes, 0) AS nb_graphemes, COALESCE(la.nb_syllables, 0) AS nb_syllables, lr.created_at, lr.updated_at FROM lesson_refs lr LEFT JOIN ( SELECT lesson_ref_id, COUNT(*) AS nb_chips FROM chips GROUP BY lesson_ref_id ) ch ON ch.lesson_ref_id = lr.lesson_ref_id LEFT JOIN ( SELECT lesson_ref_id, COUNT(*) AS nb_examples FROM examples GROUP BY lesson_[...]
[ √âditer ]
 MySQL a retourn√© un r√©sultat vide (c'est √† dire aucune ligne). (traitement en 0.0208 seconde(s).)
-- ========================= -- 2) Vue : chips d√©taill√©s -- ========================= CREATE OR REPLACE VIEW v_lesson_chips AS SELECT c.chip_id, c.lesson_ref_id, lr.course_id, lr.lesson_id, ct.code AS chip_type_code, c.title, c.content_md, c.created_at FROM chips c JOIN chip_types ct ON ct.chip_type_id = c.chip_type_id JOIN lesson_refs lr ON lr.lesson_ref_id = c.lesson_ref_id
[√âditer en ligne] [ √âditer ] [ Cr√©er le code source PHP ]
 MySQL a retourn√© un r√©sultat vide (c'est √† dire aucune ligne). (traitement en 0.0282 seconde(s).)
-- ========================= -- 3) Vue : rules d√©taill√©es -- ========================= CREATE OR REPLACE VIEW v_lesson_rules AS SELECT lrl.lesson_ref_id, lr.course_id, lr.lesson_id, r.rule_id, rt.code AS rule_type_code, r.language_code, r.title, r.statement_md, r.pattern_json, r.notes_md, il.code AS importance_code, il.label_fr AS importance_label_fr, r.created_at FROM lesson_rules lrl JOIN lesson_refs lr ON lr.lesson_ref_id = lrl.lesson_ref_id JOIN rules r ON r.rule_id = lrl.rule_id JOIN rule_types rt ON rt.rule_type_id = r.rule_type_id JOIN importance_levels il ON il.importance_id = lrl.importance_id
[√âditer en ligne] [ √âditer ] [ Cr√©er le code source PHP ]
 MySQL a retourn√© un r√©sultat vide (c'est √† dire aucune ligne). (traitement en 0.0169 seconde(s).)
-- ========================= -- 4) Vue : examples -- ========================= CREATE OR REPLACE VIEW v_lesson_examples AS SELECT e.example_id, e.lesson_ref_id, lr.course_id, lr.lesson_id, e.kg_text, e.fr_text, e.en_text, e.notes_md, e.created_at FROM examples e JOIN lesson_refs lr ON lr.lesson_ref_id = e.lesson_ref_id
[√âditer en ligne] [ √âditer ] [ Cr√©er le code source PHP ]
 MySQL a retourn√© un r√©sultat vide (c'est √† dire aucune ligne). (traitement en 0.0267 seconde(s).)
-- ========================= -- 5) Vue : lesson_atoms enrichie (types + subtypes + glosses) -- ========================= CREATE OR REPLACE VIEW v_lesson_atoms AS SELECT la.lesson_ref_id, lr.course_id, lr.lesson_id, la.atom_id, lar.code AS lesson_role_code, lar.label_fr AS lesson_role_label_fr, t.code AS atom_type_code, t.label_fr AS atom_type_label_fr, st.code AS atom_subtype_code, st.label_fr AS atom_subtype_label_fr, a.language_code, a.form, a.form_raw, a.normalized_form, a.gloss_fr, a.gloss_en, ag.glosses AS glosses_all, la.evidence_md, la.created_at FROM lesson_atoms la JOIN lesson_refs lr ON lr.lesson_ref_id = la.lesson_ref_id JOIN atoms a ON a.atom_id = la.atom_id JOIN atom_types t ON t.atom_type_id = a.atom_type_id LEFT JOIN atom_subtypes st ON st.atom_subtype_id = a.atom_subtype_id JOIN lesson_atom_roles lar ON lar.lesson_atom_role_id = la.lesson_atom_role_id LEFT JOIN ( SELECT atom_id, GROUP_CONCA[...]
[ √âditer ]
 MySQL a retourn√© un r√©sultat vide (c'est √† dire aucune ligne). (traitement en 0.0326 seconde(s).)
-- ========================= -- 6) Vue : d√©composition en graph√®mes (orthographe default) -- ========================= CREATE OR REPLACE VIEW v_atom_decomp_default AS SELECT a.atom_id, a.language_code, t.code AS atom_type_code, a.normalized_form, o.orthography_id, o.name AS orthography_name, COUNT(*) AS nb_graphemes, GROUP_CONCAT(g.grapheme ORDER BY ags.seq SEPARATOR '') AS grapheme_join, GROUP_CONCAT(g.grapheme ORDER BY ags.seq SEPARATOR ' ') AS grapheme_spaced FROM atom_grapheme_seq ags JOIN orthographies o ON o.orthography_id = ags.orthography_id AND o.is_default = 1 JOIN graphemes g ON g.grapheme_id = ags.grapheme_id JOIN atoms a ON a.atom_id = ags.atom_id JOIN atom_types t ON t.atom_type_id = a.atom_type_id GROUP BY a.atom_id, a.language_code, t.code, a.normalized_form, o.orthography_id, o.name
[√âditer en ligne] [ √âditer ] [ Cr√©er le code source PHP ]
 MySQL a retourn√© un r√©sultat vide (c'est √† dire aucune ligne). (traitement en 0.0271 seconde(s).)
-- ========================= -- 7) Vue : relations d‚Äôatomes lisibles -- ========================= CREATE OR REPLACE VIEW v_atom_relations AS SELECT ar.from_atom_id, af.normalized_form AS from_form, tf.code AS from_type, ar.to_atom_id, at2.normalized_form AS to_form, tt.code AS to_type, rt.code AS relation_code, rt.label_fr AS relation_label_fr, ar.notes_md, ar.created_at FROM atom_relations ar JOIN relation_types rt ON rt.relation_type_id = ar.relation_type_id JOIN atoms af ON af.atom_id = ar.from_atom_id JOIN atom_types tf ON tf.atom_type_id = af.atom_type_id JOIN atoms at2 ON at2.atom_id = ar.to_atom_id JOIN atom_types tt ON tt.atom_type_id = at2.atom_type_id
[√âditer en ligne] [ √âditer ] [ Cr√©er le code source PHP ]
 MySQL a retourn√© un r√©sultat vide (c'est √† dire aucune ligne). (traitement en 0.0181 seconde(s).)
-- ========================= -- 8) Vue : sources par atom -- ========================= CREATE OR REPLACE VIEW v_atom_sources AS SELECT asrc.atom_id, a.normalized_form AS atom_form, t.code AS atom_type, s.source_id, s.code AS source_code, s.title AS source_title, asrc.ref, asrc.quote_md, asrc.comment_md, asrc.created_at FROM atom_sources asrc JOIN atoms a ON a.atom_id = asrc.atom_id JOIN atom_types t ON t.atom_type_id = a.atom_type_id JOIN sources s ON s.source_id = asrc.source_id
[√âditer en ligne] [ √âditer ] [ Cr√©er le code source PHP ]
Ouvrir une nouvelle fen√™tre phpMyAdmin


////

Afficher la zone SQL
 La s√©lection courante ne contient pas de colonne unique. Les grilles d'√©dition, les liens √âditer, Copier et Supprimer peuvent provoquer un r√©sultat ind√©sirable. Documentation
 Affichage des lignes 0 - 0 (total de 1, traitement en 0.0029 seconde(s).)
SELECT * FROM v_lessons_overview
Profilage [√âditer en ligne] [ √âditer ] [ Expliquer SQL ] [ Cr√©er le code source PHP ] [ Actualiser]
 Tout afficher	|			Nombre de lignes : 
25
Filtrer les lignes :
Chercher dans cette table
+ Options
Textes complets	
lesson_ref_id
platform_id
course_id
lesson_id
position
lesson_group
slug
title
status
visibility
nb_chips
nb_rules
nb_examples
nb_atoms
nb_atoms_core
nb_atoms_bonus
nb_graphemes
nb_syllables
created_at
updated_at

√âditer √âditer
Copier Copier
Supprimer Supprimer
1
1
3
9
1
La syntaxe
lalphabet-du-kikongo-et-la-structure-des-mots-et-d...
L'alphabet du kikongo et la structure des mots et ...
published
public
14
9
10
46
20
26
20
26
2025-12-20 02:54:19
2025-12-20 02:54:19
Avec la s√©lection : Tout cocher Avec la s√©lection : √âditer √âditer Copier Copier Supprimer Supprimer Exporter Exporter

 Tout afficher	|			Nombre de lignes : 
25
Filtrer les lignes :
Chercher dans cette table
Op√©rations sur les r√©sultats de la requ√™te
Imprimer ImprimerCopier dans le presse-papiers Copier dans le presse-papiersExporter Exporter Afficher le graphique Afficher le graphique Cr√©er une vue Cr√©er une vue

Conserver cette requ√™te SQL dans les signets Conserver cette requ√™te SQL dans les signets
Intitul√© : 

 La s√©lection courante ne contient pas de colonne unique. Les grilles d'√©dition, les cases √† cocher ainsi que les liens √âditer, Copier et Supprimer ne sont pas disponibles. Documentation
 Affichage des lignes 0 - 13 (total de 14, traitement en 0.0024 seconde(s).) [chip_id: 9... - 32...]
SELECT chip_id, chip_type_code, title FROM v_lesson_chips WHERE lesson_ref_id = 1 ORDER BY chip_id
Profilage [√âditer en ligne] [ √âditer ] [ Expliquer SQL ] [ Cr√©er le code source PHP ] [ Actualiser]
 Tout afficher	|			Nombre de lignes : 
25
Filtrer les lignes :
Chercher dans cette table
+ Options
chip_id Croissant 1
chip_type_code
title
9
objectif
Objectif
10
regle
Voyelles : groupes
11
regle
√âpellation (ta / ata)
12
note
Prononciation (rappels)
13
a_retenir
Inventaire (cours)
14
regle
Tons : diacritiques
15
regle
Alternative sans diacritiques (valid√©e)
16
a_retenir
Norme Factory
24
regle
Diphthongues : √©crire ce qu‚Äôon prononce
25
regle
Transformations euphoniques (nasales & apostrophe)
26
note
Pi√®ges fr√©quents
27
a_retenir
Check-list lecture correcte
31
regle
Syllabes ouvertes
32
a_retenir
Check-list lecture (30s)

 Tout afficher	|			Nombre de lignes : 
25
Filtrer les lignes :
Chercher dans cette table
Op√©rations sur les r√©sultats de la requ√™te
Imprimer ImprimerCopier dans le presse-papiers Copier dans le presse-papiersExporter Exporter Afficher le graphique Afficher le graphique Cr√©er une vue Cr√©er une vue

Conserver cette requ√™te SQL dans les signets Conserver cette requ√™te SQL dans les signets
Intitul√© : 

 La s√©lection courante ne contient pas de colonne unique. Les grilles d'√©dition, les cases √† cocher ainsi que les liens √âditer, Copier et Supprimer ne sont pas disponibles. Documentation
 Affichage des lignes 0 - 24 (total de 46, traitement en 0.0041 seconde(s).) [atom_type_code: GRAPHEME... - SYLLABLE...] [normalized_form: A... - DU...]
SELECT atom_id, lesson_role_code, atom_type_code, atom_subtype_code, normalized_form FROM v_lesson_atoms WHERE lesson_ref_id = 1 ORDER BY atom_type_code, normalized_form
Profilage [√âditer en ligne] [ √âditer ] [ Expliquer SQL ] [ Cr√©er le code source PHP ] [ Actualiser]

1
|	 Tout afficher	|			Nombre de lignes : 
25
Filtrer les lignes :
Chercher dans cette table
+ Options
atom_id
lesson_role_code
atom_type_code Croissant 1
atom_subtype_code
normalized_form Croissant 2
atom_id
lesson_role_code
atom_type_code Croissant 1
atom_subtype_code
normalized_form Croissant 2
3
core
grapheme
vowel
a
8
core
grapheme
consonant
b
9
core
grapheme
consonant
d
4
core
grapheme
vowel
e
10
core
grapheme
consonant
f
11
core
grapheme
consonant
g
1
core
grapheme
vowel
i
12
core
grapheme
consonant
k
13
core
grapheme
consonant
l
14
core
grapheme
consonant
m
15
core
grapheme
consonant
n
5
core
grapheme
vowel
o
16
core
grapheme
consonant
p
17
core
grapheme
consonant
s
18
core
grapheme
consonant
t
2
core
grapheme
vowel
u
19
core
grapheme
consonant
v
6
core
grapheme
semi_vowel
w
7
core
grapheme
semi_vowel
y
20
core
grapheme
consonant
z
36
bonus
syllable
cv
da
52
bonus
syllable
cv
de
53
bonus
syllable
cv
di
54
bonus
syllable
cv
do
55
bonus
syllable
cv
du


1
|	 Tout afficher	|			Nombre de lignes : 
25
Filtrer les lignes :
Chercher dans cette table
Op√©rations sur les r√©sultats de la requ√™te
Imprimer ImprimerCopier dans le presse-papiers Copier dans le presse-papiersExporter Exporter Afficher le graphique Afficher le graphique Cr√©er une vue Cr√©er une vue

Conserver cette requ√™te SQL dans les signets Conserver cette requ√™te SQL dans les signets    ///
Parfait ‚Äî on a bien avanc√© et ta DB ‚Äúfactory‚Äù est maintenant op√©rationnelle. Voil√† un bilan complet (copiable dans ton journal), puis la d√©cision d‚Äôarchi ‚ÄúJava au centre‚Äù (avec ou sans Nuxt).

Bilan complet ‚Äî 6i695q_factory_db (√©tat apr√®s Le√ßon 9)
1) Objectif atteint

On a r√©ussi √† transformer la le√ßon 9 en contenu structur√©, et √† d√©marrer un graphe d‚Äôatomes (graph√®mes + syllabes-racines) reli√© √† la le√ßon, pr√™t pour :

dashboard ‚Äúlessons‚Äù

g√©n√©ration d‚Äôexercices plus tard (√† partir des r√®gles + atomes + progression)

2) Le√ßon 9 : r√©f√©renc√©e proprement

Dans lesson_refs :

lesson_ref_id = 1

platform_id = 1

course_id = 3

lesson_id = 9

slug = lalphabet-du-kikongo-et-la-structure-des-mots-et-des-sons

status = published, visibility = public

3) Contenu p√©dagogique stock√© (Le√ßon 9)

Chips

chips : 14 chips (types : objectif, r√®gle, note, √† retenir)

via v_lesson_chips, on voit bien la liste (Objectif, Voyelles, √âpellation, Tons, Norme Factory, Diphthongues, Pi√®ges, Check-lists, etc.)

R√®gles

rules : 9 r√®gles au total

lesson_rules (le√ßon 9) : 9 liens

rule_types pr√©sents : orthography, prosody, pedagogy

Exemples

examples : 10 exemples (dont ceux des tons + ‚Äúmua‚Äù norme)

‚úÖ Important : tu as clarifi√© la ligne directrice :

on stocke des exemples traduits si utile (fr/en/pt)

mais on ne ‚Äúrecopie‚Äù pas le lexique complet (d√©j√† dans Lexikongo)

4) Atomes : graph√®mes + syllabes-racines (Le√ßon 9)

Vue overview
v_lessons_overview (le√ßon_ref_id=1) donne :

nb_chips = 14

nb_rules = 9

nb_examples = 10

nb_atoms = 46

nb_atoms_core = 20

nb_atoms_bonus = 26

nb_graphemes = 20

nb_syllables = 26

D√©tail :

20 graph√®mes (core) : voyelles + consonnes + semi-voyelles (alphabet de la le√ßon 9)

26 syllabes (bonus) : racines CV et CCV (ka/ki/‚Ä¶ + s√©ries pa‚Ä¶, de‚Ä¶, nda‚Ä¶, mpe‚Ä¶, etc.)

5) Orthographe & d√©composition en graph√®mes (clean)

Orthographies

orthographies : ‚ÄúKikongo classique‚Äù existe, is_default=1, orthography_id=1

Graphemes

graphemes : 20 lignes

Mapping atom ‚Üí graph√®me

atom_grapheme_seq : 84 lignes

Et c‚Äôest coh√©rent math√©matiquement :

20 graph√®mes * 1 = 20

14 syllabes CV * 2 = 28

12 syllabes CCV * 3 = 36
Total = 20 + 28 + 36 = 84 ‚úÖ

Ton test de contr√¥le (0 ligne retourn√©e si nb_seq incorrect) confirme que tout est align√©.

6) Bibliographie / sources / th√©ories (d√©j√† en place)

Tu as maintenant une base ‚Äúscientifique‚Äù exploitable :

source_kinds : kind book OK

sources : source sungu_banzuzi_roots enregistr√©e (champ authors, pas author)

atom_sources : 26 liens syllabe‚Üísource (Sungu Banzuzi)

Et c√¥t√© conceptualisation :

theories existe (pour ‚ÄúBanzuzi roots‚Äù, ‚ÄúNsaudi letters‚Äù, etc.)

tags + atom_tags existent et servent √† tagger :

‚Äúetym_root‚Äù, ‚Äúsource_sungu_banzuzi‚Äù

‚Äútheory_sungu_banzuzi‚Äù, ‚Äútheory_nsaudi_letters‚Äù

tu as v√©rifi√© que √ßa touche bien :

26 syllabes

20 graph√®mes

7) Relations entre atomes (pr√™t pour ‚Äúcomposed_of‚Äù, ‚Äúderived_from‚Äù, etc.)

relation_types : 11 types d√©j√† pr√™ts (variant_of, composed_of, derived_from, has_etym_root, ‚Ä¶)

atom_relations : 5 relations actuellement

Et tu as pos√© une r√®gle de mod√©lisation importante :

on n‚Äôinvente pas des d√©coupages qui violent la structure (ex : ‚Äúnzo = n + zo‚Äù non dans cette logique)

mpimpa est la forme √©crite, et [mpiimpa] = prononciation / allongement (donc √† repr√©senter via r√®gle + exemple + √©ventuellement variante, pas en cassant la syllabe)

Le√ßon 9 : ‚Äúfinir proprement‚Äù (ce qu‚Äôil reste, tr√®s simple)

V√©rifier que les content_md des 14 chips sont complets (pas tronqu√©s).

Pour ‚Äúallongement / tons‚Äù : on garde ton choix :

r√®gle + exemples (et la norme ‚Äúdouble voyelle‚Äù valid√©e : k√¥ka ‚Üí kooka)

pas besoin d‚Äôune table ‚Äúpronunciations‚Äù maintenant (tu as d√©j√† phon√©tique dans Lexikongo)

D√©cision d‚Äôarchitecture : oui, ‚ÄúJava au centre‚Äù (et Nuxt devient optionnel)

Tu as raison : vu que vous visez web + mobile + livres + packs InDesign + jeux, le plus solide c‚Äôest :

A) Java = le ‚Äúmoteur‚Äù et la ‚Äúcolonne vert√©brale‚Äù

Tu as d√©j√† un bon point de d√©part avec ton backend-java.zip :

il sait d√©j√† g√©n√©rer des puzzles (wordsearch/crossword)

il sait exporter du JSON

il se connecte √† Lexikongo/Lexilingala

üëâ On √©tend √ßa pour qu‚Äôil sache aussi lire/servir la factory DB (lessons/chips/rules/atoms).

B) Nuxt n‚Äôest plus ‚Äúle syst√®me‚Äù, seulement un client (si tu en veux un)

Option 1 : Dashboard Nuxt l√©ger (lecture/√©dition), rapide √† construire

Option 2 : Dashboard Java (Vaadin / Spring MVC / Thymeleaf) si tu veux 100% Java

Option 3 : pas de dashboard au d√©but : juste API + exports JSON (tu bosses via phpMyAdmin + scripts)

C) Architecture recommand√©e (simple et scalable)

1 repo Java (multi-modules Maven) :

engine : g√©n√©rateurs de puzzles (ce que tu as d√©j√†)

adapters-lexikongo : acc√®s DB lexique

adapters-factory : acc√®s DB factory

api : Spring Boot REST (ou m√™me sans Spring au d√©but, mais Spring aide)

cli : tes outils d‚Äôexport actuels (conserv√©s)

Endpoints typiques (quand tu voudras)

GET /lessons ‚Üí list

GET /lessons/{lessonRefId} ‚Üí overview

GET /lessons/{id}/chips|rules|atoms|examples

POST /generate/wordsearch / POST /generate/crossword (param√®tres = langue, th√®me, tags, niveau, le√ßon‚Ä¶)

Pourquoi √ßa colle parfaitement √† ton approche ‚Äúprogression‚Äù

Parce que la factory DB devient :

la source de v√©rit√© p√©dagogique (chips/rules/atoms + progression)

et le lexique (Lexikongo) reste :

la source de vocabulaire