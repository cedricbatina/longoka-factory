# ğŸ”„ Flux de Correction â€” LeÃ§on 14

## Vue d'ensemble du processus

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUX DE CORRECTION LEÃ‡ON 14                  â”‚
â”‚                 "Le verbe Ãªtre dans tous ses Ã©tats"             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Diagramme complet

```
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   PRÃ‰PARATION    â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚  1. BACKUP DB         â”‚
                           â”‚  mysqldump factory_db â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Ã‰TAT AVANT                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  factory_lesson14_verify.sql â†’ lesson14_before.txt               â”‚
â”‚                                                                  â”‚
â”‚  ğŸ“‹ DÃ©tection des problÃ¨mes:                                     â”‚
â”‚  â”œâ”€ N exemples sans rÃ´le "form"                                 â”‚
â”‚  â”œâ”€ M exemples avec >1 rÃ´le "form"                              â”‚
â”‚  â””â”€ P textes explicatifs en franÃ§ais                            â”‚
â”‚                                                                  â”‚
â”‚  Exemple d'output:                                               â”‚
â”‚  â€¢ Examples without FORM: N âŒ NEEDS FIX                         â”‚
â”‚  â€¢ Examples with >1 FORM:  M âŒ NEEDS FIX                        â”‚
â”‚  â€¢ French text:            P âš ï¸ REVIEW NEEDED                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  2. ANALYSE MANUELLE   â”‚
            â”‚  VÃ©rifier lesson14_    â”‚
            â”‚  before.txt            â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  3. DÃ‰CISION: Corriger?        â”‚
        â”‚     [OUI] â†’ Continuer          â”‚
        â”‚     [NON] â†’ ArrÃªter            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ OUI
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PHASE DE CORRECTION                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  factory_lesson14_fix_forms.sql â†’ lesson14_fix.txt               â”‚
â”‚                                                                  â”‚
â”‚  ğŸ”§ Section A: Normalisation multi-forms                         â”‚
â”‚  â”œâ”€ Identifier exemples avec >1 form                            â”‚
â”‚  â”œâ”€ Garder le premier comme "form"                              â”‚
â”‚  â””â”€ Convertir les autres en "variant_form"                      â”‚
â”‚                                                                  â”‚
â”‚  ğŸ”§ Section B: CrÃ©ation forms manquantes                         â”‚
â”‚  â”œâ”€ Extraire dernier mot de kg_text                             â”‚
â”‚  â”œâ”€ CrÃ©er atoms manquants (INSERT INTO atoms)                   â”‚
â”‚  â””â”€ Lier aux exemples (INSERT INTO example_atoms)               â”‚
â”‚                                                                  â”‚
â”‚  ğŸ”§ Section C: Suppression textes franÃ§ais (OPTIONNEL)           â”‚
â”‚  â”œâ”€ Identifier candidats (kg_text NULL ou "se conjugue")        â”‚
â”‚  â”œâ”€ Supprimer example_atoms liÃ©s (si dÃ©commentÃ©)                â”‚
â”‚  â””â”€ Supprimer examples (si dÃ©commentÃ©)                          â”‚
â”‚                                                                  â”‚
â”‚  RÃ©sultat:                                                       â”‚
â”‚  â€¢ X new_atoms_created                                           â”‚
â”‚  â€¢ Y new_form_links_created                                      â”‚
â”‚  â€¢ M multiple forms normalized                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Ã‰TAT APRÃˆS                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  factory_lesson14_verify.sql â†’ lesson14_after.txt                â”‚
â”‚                                                                  â”‚
â”‚  ğŸ“‹ VÃ©rification post-correction:                                â”‚
â”‚  â”œâ”€ 0 exemples sans rÃ´le "form"        âœ… FIXED                  â”‚
â”‚  â”œâ”€ 0 exemples avec >1 rÃ´le "form"     âœ… FIXED                  â”‚
â”‚  â””â”€ 0 ou P textes franÃ§ais (si supprimÃ©s)                       â”‚
â”‚                                                                  â”‚
â”‚  Exemple d'output attendu:                                       â”‚
â”‚  â€¢ Examples without FORM: 0 âœ… FIXED                             â”‚
â”‚  â€¢ Examples with >1 FORM:  0 âœ… FIXED                            â”‚
â”‚  â€¢ Total examples: T (ou T-P si suppressions)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  4. COMPARAISON        â”‚
            â”‚  before vs after       â”‚
            â”‚  diff lesson14_*.txt   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  5. VALIDATION OK?             â”‚
        â”‚     [OUI] â†’ Export JSON        â”‚
        â”‚     [NON] â†’ Rollback           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ OUI
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       EXPORT & FINALISATION                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  6. Export JSON                                                  â”‚
â”‚  FactoryLessonPackJsonExportTool                                 â”‚
â”‚  --course 3 --lesson 14 --out lesson-3-14.json                   â”‚
â”‚                                                                  â”‚
â”‚  Contenu exportÃ©:                                                â”‚
â”‚  â”œâ”€ meta (course_id, lesson_id, exported_at)                    â”‚
â”‚  â”œâ”€ lesson (titre, slug, status, visibility)                    â”‚
â”‚  â”œâ”€ chips (objectifs, rÃ¨gles, notes)                            â”‚
â”‚  â”œâ”€ lesson_rules (rÃ¨gles liÃ©es)                                 â”‚
â”‚  â”œâ”€ examples (avec kg_text, fr_text)                            â”‚
â”‚  â”œâ”€ lesson_atoms (atoms core/bonus)                             â”‚
â”‚  â””â”€ example_atoms (forms, roots, stems, affixes)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  7. VALIDATION JSON    â”‚
            â”‚  jq '.lesson.title'    â”‚
            â”‚  VÃ©rifier structure    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  8. COPIE FINALE       â”‚
            â”‚  â†’ corrected kikongo   â”‚
            â”‚    course/...          â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚  9. ARCHIVAGE  â”‚
                â”‚  Backup â†’ safe â”‚
                â”‚  Docs â†’ repo   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚   âœ… TERMINÃ‰  â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”€ Flux alternatif: Rollback

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         EN CAS D'ERREUR                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  ProblÃ¨me dÃ©tectÃ©?     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  ArrÃªter toute modification    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Restaurer depuis backup       â”‚
        â”‚  mysql < backup_lesson14.sql   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Re-vÃ©rifier l'Ã©tat            â”‚
        â”‚  factory_lesson14_verify.sql   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Analyser la cause             â”‚
        â”‚  Consulter logs                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Corriger le problÃ¨me          â”‚
        â”‚  ou demander support           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ˆ MÃ©triques de progression

```
Ã‰tat Initial                    Correction                Ã‰tat Final
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

examples:        T              
  sans form:     N âŒ            â”€â”€[+atoms]â”€â”€â–º           0 âœ…
  avec >1 form:  M âŒ            â”€â”€[normalize]â”€â”€â–º        0 âœ…
  avec form:     T-N-M           â”€â”€[preserve]â”€â”€â–º        T âœ…

atoms:           A              
                                â”€â”€[+X atoms]â”€â”€â–º         A+X

example_atoms:   EA             
  form role:     T-N-M          â”€â”€[+Y links]â”€â”€â–º        T
  variant_form:  ?              â”€â”€[convert]â”€â”€â–º         M (si applicable)
  autres:        ?              â”€â”€[preserve]â”€â”€â–º        ?

Textes franÃ§ais: P              â”€â”€[delete?]â”€â”€â–º         0 ou P
```

## ğŸ• Chronologie

```
T+0min    â”‚ Backup crÃ©Ã©
          â”‚
T+1min    â”‚ VÃ©rification AVANT exÃ©cutÃ©e
          â”‚ â””â”€ Analyse des rÃ©sultats
          â”‚
T+2min    â”‚ DÃ©cision de procÃ©der
          â”‚
T+3min    â”‚ Correction exÃ©cutÃ©e
          â”‚ â”œâ”€ Section A: Normalisation (< 1s)
          â”‚ â”œâ”€ Section B: CrÃ©ation forms (< 2s)
          â”‚ â””â”€ Section C: Suppression optionnelle (< 1s)
          â”‚
T+4min    â”‚ VÃ©rification APRÃˆS exÃ©cutÃ©e
          â”‚ â””â”€ Comparaison avec AVANT
          â”‚
T+5min    â”‚ Validation OK
          â”‚
T+6-8min  â”‚ Export JSON
          â”‚ â”œâ”€ Compilation Maven (si nÃ©cessaire)
          â”‚ â””â”€ ExÃ©cution FactoryLessonPackJsonExportTool
          â”‚
T+9min    â”‚ Validation JSON + Copie finale
          â”‚
T+10min   â”‚ Archivage et documentation
          â”‚
T+10min   â”‚ âœ… Processus terminÃ©
```

## ğŸ¯ Points de dÃ©cision

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    POINTS DE CONTRÃ”LE                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ” Checkpoint 1: AprÃ¨s vÃ©rification AVANT
   â”œâ”€ Y a-t-il des problÃ¨mes Ã  corriger? â†’ OUI: Continuer / NON: ArrÃªter
   â””â”€ Le backup est-il crÃ©Ã©? â†’ OUI: Continuer / NON: STOP

ğŸ” Checkpoint 2: AprÃ¨s correction
   â”œâ”€ Des erreurs SQL? â†’ OUI: Rollback / NON: Continuer
   â””â”€ Logs cohÃ©rents? â†’ OUI: Continuer / NON: Investiguer

ğŸ” Checkpoint 3: AprÃ¨s vÃ©rification APRÃˆS
   â”œâ”€ Tous les problÃ¨mes rÃ©solus? â†’ OUI: Continuer / NON: Rollback
   â””â”€ Nombre d'exemples cohÃ©rent? â†’ OUI: Continuer / NON: Investiguer

ğŸ” Checkpoint 4: AprÃ¨s export JSON
   â”œâ”€ Fichier crÃ©Ã©? â†’ OUI: Continuer / NON: VÃ©rifier config
   â”œâ”€ Structure valide? â†’ OUI: Continuer / NON: Re-exporter
   â””â”€ Contenu cohÃ©rent? â†’ OUI: Finaliser / NON: Investiguer
```

## ğŸ“Š Transformation des donnÃ©es

### AVANT (Exemple)

```
example_id: 123
kg_text: "Yandi uena mukanda"
fr_text: "Il/Elle est le livre"

example_atoms:
  (aucun avec role='form')  âŒ PROBLÃˆME
```

### APRÃˆS (Correction)

```
example_id: 123
kg_text: "Yandi uena mukanda"
fr_text: "Il/Elle est le livre"

example_atoms:
  - atom_id: 456 (mukanda), role: form  âœ… CRÃ‰Ã‰
  - autres atoms possibles (yandi, uena...)
```

### AVANT (Multi-forms)

```
example_id: 348
kg_text: "Mono uena..."

example_atoms:
  - atom_id: 101, role: form  âŒ MULTIPLE
  - atom_id: 102, role: form  âŒ MULTIPLE
```

### APRÃˆS (NormalisÃ©)

```
example_id: 348
kg_text: "Mono uena..."

example_atoms:
  - atom_id: 101, role: form         âœ… PRINCIPAL
  - atom_id: 102, role: variant_form âœ… VARIANT
```

## ğŸ” SÃ©curitÃ© et rÃ©versibilitÃ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          GARANTIES DE SÃ‰CURITÃ‰                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Backup obligatoire avant toute action      â”‚
â”‚ âœ… Script verify: READ-ONLY (aucun risque)    â”‚
â”‚ âœ… Script fix: INSERT IGNORE (pas de doublons)â”‚
â”‚ âœ… DELETE commentÃ© par dÃ©faut (sÃ©curitÃ©)      â”‚
â”‚ âœ… VÃ©rifications prÃ©/post intÃ©grÃ©es           â”‚
â”‚ âœ… Rollback documentÃ© et testÃ©                â”‚
â”‚ âœ… Pattern Ã©prouvÃ© (LeÃ§on 13)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Version**: 1.0  
**Date**: 2026-02-14  
**Statut**: Documentation complÃ¨te
